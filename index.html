<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>먹거리</title> <!-- 사이트 타이틀 변경 -->

    <!-- 스타일시트 로드 순서 중요: global -> layout -> 각 컴포넌트 -->
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/navbar.css">
    <link rel="stylesheet" href="css/location.css">
    <link rel="stylesheet" href="css/cart.css">
    <link rel="stylesheet" href="css/ai_chat.css">
    
    <!-- Nanum Gothic 폰트 로드 -->
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700&display=swap" rel="stylesheet">
    <!-- Font Awesome 아이콘 -->
    <script src="https://kit.fontawesome.com/ef6f900ef2.js" crossorigin="anonymous"></script>

    <!-- 카카오 지도 API (geometry 라이브러리 포함 확인) -->
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=5e0d0b68efda88077d8a07c1e013964d&libraries=services,clusterer,drawing"></script>
</head>
<body>

    <!-- 네비게이션 바는 js/navbarLoader.js가 body 맨 앞에 동적으로 삽입합니다. -->

    <section id="intro" class="page-section section-intro">
    <div class="content-wrapper">
        <div class="horizontal-area">
            <div class="text-area">
                <h2>똑똑한 장보기의 시작,</h2>
                <h1 class="main-title">먹거리</h1>
                <p>주변 전통시장과 골목상권을 연결해 사용자에게 최적의 장보기 경험을 제공합니다.<br>예산, 위치, 요리 메뉴를 기반으로 장보기 경로를 안내하고, 장바구니 목록과 총 금액을 한눈에 확인할 수 있습니다.</p>
            </div>
            <div class="image-area">
                <img src="images/intro.png" alt="서비스 소개 이미지">
            </div>
        </div>
        <button id="scrollToLocationBtn" class="primary-btn"> 시작하기 <i class="fa-solid fa-arrow-down"></i></button>
        </div>
    </section>


    <section id="location-service" class="page-section section-light">
        <div class="content-wrapper">
            <h2>장보기 시작 위치 설정</h2>
            <p>아래 버튼을 눌러 현재 위치를 확인하거나, 주소를 직접 입력하여 위치를 설정하세요.</p>

            <!-- 위치 찾기 (Geolocation) -->
            <button id="getLocationBtn" class="secondary-btn"><i class="fa-solid fa-location-crosshairs"></i> 내 현재 위치 찾기</button>

            <!-- 주소 입력 및 검색 UI -->
            <div class="input-search-area">
                <input type="text" id="addressInput" placeholder="예: 대구 계명대학교, 역삼동 123-45">
                <button id="searchAddressBtn" class="secondary-btn"><i class="fa-solid fa-magnifying-glass"></i> 주소/명칭 검색</button>
            </div>
            
            <!-- 검색 결과 목록 (초기에는 숨김, js에서 활성화) -->
            <div id="searchResultWrapper" class="search-result-wrapper">
                <ul id="searchResultList" class="search-result-list"></ul>
                <div id="pagination" class="pagination"></div>
            </div>

            <!-- 카카오 지도 표시 공간 -->
            <div id="map" class="map-container"></div>

            <!-- 상태 메시지 -->
            <div id="statusMessage" class="status-message">위치 확인을 시작하려면 버튼을 누르세요.</div>

            <!-- 지도 중심 설정 버튼 -->
            <button id="setMapCenterBtn" class="primary-btn" style="display: none;"><i class="fa-solid fa-map-pin"></i> 지도의 중심을 시작 위치로 설정</button>
            
            <!-- 서비스 시작 버튼 -->
            <button id="startButton" class="primary-btn" disabled><i class="fa-solid fa-basket-shopping"></i> 위치 설정 완료 </button>
        </div>
    </section>

    <section id="ai-guide" class="page-section section-intro">
        <div class="content-wrapper">
            <h2>사용자 입력</h2>
            <div class="desc">
                <i class="fa-solid fa-lightbulb" style="color: rgb(255, 230, 0);"></i> 더 정확한 추천을 원하시면, 인원수, 식사목적, 취향, 알레르기도 입력하여주세요!<br>
                ex) 월남쌈 만들기, 4명, 저녁모임, 채식 위주, 땅콩 알레르기
            </div>
            <div class="prompt-container">
                <form id="prompt-form" class="prompt-form">
                    <div class="input-wrapper">
                        <textarea id="prompt-text" placeholder="오늘 먹을 메뉴와 예산을 알려주세요."></textarea>
                        <button type="submit" class="submit-btn">
                            <i class="fa-solid fa-arrow-right"></i>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <section id="cart-list" class="page-section section-dark">
        <div class="content-wrapper">
            <h2>나의 장보기 목록</h2>
            <p>AI가 추천하는 장보기 목록과 총 예상 금액을 확인하세요. 시장에서 직접 체크해 보세요!</p>
            <h1>추천 장보기 코스</h1>
            <div id="map2"></div>
            <div id="total-cost"></div>
            <div id="shopping-course-container"></div>
        </div>
    </section>

    <!-- 메인 진입점 스크립트 (모든 다른 JS 모듈을 여기서 임포트 및 호출) -->
    <!-- type="module"을 추가하여 ES Modules를 사용하도록 지정 -->
    <script type="module" src="js/main.js"></script>
</body>
</html>